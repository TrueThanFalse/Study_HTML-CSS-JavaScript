<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>
        JSON(JavaScript Object Notation) : 자바스크립트 객체 표기법
    </h1>
    <ul>
        <li>
            데이터 요청 및 응답처리에 필요한 데이터의 표준 형식을 제공하는 타입
        </li>
        <li>
            백엔드(서버)언어의 종류에 상관없이 데이터 송수신 단말 형식으로 통일
        </li>
        <li>
            백엔드(서버)에서는 무조건 String 처리 함
            화면(JavaScript)은 Object로 처리 함
        </li>
        <li>
            서버로 데이터를 보낼 때(Object to String) 명령어 : JSON.stringify(jsObject)    
        </li>
        <li>
            서버에서 데이터를 받을 때(String to Object) 명령어 : JSON.parse(stringData)    
        </li>
    </ul>

    <script>
        // 서버에서 보내주는 json타입의 string 데이터
        const stringData = '{"id":"1234", "type":"donut", "name":"cake",'+
        '"image":{"url":"img/001.jpg","width":"200", "height":"200"},'+
        '"thumbnail":{"url":"img/th/001.jpg","width":"20", "height":"20"}}';
        console.log(stringData);

        // 위 코드를 객체로 변환하면 아래 cake 객체처럼 변환 됨
        const cake = {
            "id":"1234",
            "type":"donut",
            "name":"cake",
            "image":{"url":"img/001.jpg","width":"200", "height":"200"},
            "thumbnail":{"url":"img/th/001.jpg","width":"20", "height":"20"}
        }
        console.log(cake);

        let parseData = JSON.parse(stringData); // Object 타입으로 변환
        console.log(parseData);
        console.log('-----')

        // console에 key : value 형식으로 출력해보기
        for(const key in parseData){
            if(key == 'image'||key == 'thumbnail'){
                // 한번 더 객체에 접근
                for(const k in parseData[key]){
                    console.log(k,":",parseData[key][k]);
                }
            }else{
                console.log(key,":",parseData[key]);    
            }
        }

        // cake Object를 String으로 변환 : JSON.stringify(Object)
        let StringData = JSON.stringify(cake);
        console.log(stringData);
    </script>
</body>
</html>